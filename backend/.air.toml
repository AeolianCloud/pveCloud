# Air 配置文件：用于 Go 后端开发时自动热更
# 说明：
# 1) 监听 Go/YAML 变更
# 2) 变更后自动重新构建并重启服务
# 3) Windows 下输出可执行文件到 tmp/server.exe

root = "."
tmp_dir = "tmp"

[build]
# 构建入口使用 backend/main.go（已封装 internal/server.Run）
cmd = "go build -o ./tmp/server.exe ./main.go"
bin = "./tmp/server.exe"
full_bin = "./tmp/server.exe"

# 监听与忽略规则
include_ext = ["go", "yaml", "yml"]
exclude_dir = ["tmp", "vendor", ".git", "node_modules"]
exclude_regex = ["_test.go"]
exclude_unchanged = true

# 构建与重启策略
delay = 200
stop_on_error = true
kill_delay = "500ms"
send_interrupt = false

[color]
main = "cyan"
watcher = "yellow"
build = "green"
runner = "magenta"

[log]
time = true

[misc]
clean_on_exit = true
