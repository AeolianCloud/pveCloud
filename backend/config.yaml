# 默认配置文件（未设置 APP_ENV 时加载）
# 启动方式：go run cmd/server/main.go

# ─── 服务器 ───────────────────────────────────────────────
server:
  port: 8080          # 监听端口
  mode: debug         # 运行模式：debug（开发）| release（生产）

# ─── 数据库（MariaDB / MySQL）────────────────────────────
database:
  host: 127.0.0.1     # 数据库地址
  port: 3306          # 数据库端口
  user: root          # 数据库用户名
  password: ""        # 数据库密码
  name: pvecloud      # 数据库名称
  charset: utf8mb4    # 字符集，支持 emoji
  max_open_conns: 100 # 最大连接数
  max_idle_conns: 10  # 最大空闲连接数

# ─── Redis（会话存储）─────────────────────────────────────
redis:
  host: 127.0.0.1
  port: 6379
  password: ""
  db: 0
  key_prefix: "pvecloud:"

# ─── 安全（限流/防爆破）────────────────────────────────────
security:
  login:
    enabled: true
    per_ip_per_minute: 30
    per_user_per_minute: 10
    fail_window_minutes: 10
    fail_threshold: 5
    lock_minutes: 15

# ─── JWT 认证 ─────────────────────────────────────────────
jwt:
  secret: "change-me-in-production"  # 签名密钥，生产环境必须替换
  expire_hours: 24                   # Token 有效期（小时）
  refresh_expire_hours: 168          # Refresh Token 有效期（小时），默认 7 天

# ─── 日志 ─────────────────────────────────────────────────
log:
  level: info       # 日志级别：debug | info | warn | error
  encoding: console # 输出格式：console（带颜色）| json（结构化）
